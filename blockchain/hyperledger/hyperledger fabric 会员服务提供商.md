# `hyperledger fabric` 会员服务提供商

本文用于提供有关`MSP`的设置和最佳实践的详细信息。

成员服务提供者（`MSP`）是一个旨在**提供成员操作体系结构抽象的组件**。`MSP`抽象出**发布和验证证书**以及**用户身份验证**背后的所有**加密机制和协议**。`MSP`可以**定义他们自己的身份概念**，以及**管理这些身份（身份验证）和身份验证（签名生成和验证）的规则**。

`Hyperledger Fabric`区块链网络可以**由一个或多个`MSP`管理**。这提供了成员资格操作的模块化，以及跨不同成员标准和体系结构的**互操作性**。

在本文档的其余部分，详细介绍了`Hyperledger Fabric`支持的`MSP`实现的设置，并讨论了有关其使用的最佳实践。

# `MSP` 配置

要设置`MSP`的实例，需要在**每个对等方和定序方本地指定其配置**（以启用对等方和定序方签名），并在**通道上指定其配置**，以启用对等方、定序方、客户端标识验证以及相应的签名验证（身份验证）和所有渠道成员。

首先，对于每个`MSP`，需要指定名称以便引用网络中的`MSP`（例如`msp1`，`org2`和`org3.divA`）。这是一个名称，在该名称下，代表**联合体，组织或组织部门**的`MSP`的成员资格规则将在渠道中被引用。这也称为`MSP`标识符或`MSP ID`。每个`MSP`实例要求`MSP`是**唯一**的标识符。例如，在系统通道创建时将检测到**具有相同标识符的两个`MSP`实例，或者设置器将失败**。

在默认实现`MSP`的情况下，需要**指定一组参数以允许身份（证书）验证和签名验证**。这些参数由[`RFC5280`推导](http://www.ietf.org/rfc/rfc5280.txt)，包括：

+ 构成信任**根证书**的自签名（`X.509`）列表
+ `X.509`证书列表，代表此提供程序考虑用于证书验证的**中间**`CA`。这些证书应该由**信任根证书中的一个证书进行认证**，中间`CA`是可选参数
+ 一个`X.509`证书列表，其中包含一个**可验证证书路径**，该**证书路径恰好是信任根证书之一**，代表该`MSP`的**管理员**。这些证书的所有者**有权请求更改此`MSP`配置**（例如，根`CA`，中间`CA`）
+ 本`MSP`的**有效成员**应在其`X.509`证书中包含的组织单位列表。这是一个可选的配置参数，例如，当多个组织利用相同的信任根和中间`CA`，并为其成员保留`OU`字段时使用
+ 证书**撤销列表（`CRL`）列表**，每个列表对应于列出的（中间或根）`MSP`证书颁发机构中的一个。这是一个可选参数
+ 自签名（`X.509`）证书列表，**构成`TLS`证书**的`TLS`信任根。
+ 用于表示此提供程序考虑的**中间`TLS CA`的`X.509`证书列表**。这些证书应该由`TLS`信任根中的一个证书进行认证。中间`CA`是可选参数。

需要此`MSP`实例的**有效标识**才能满足以下条件：

+ 它们**采用`X.509`证书**的形式，并且具有**可验证的证书路径**，该证书路径恰好是**信任证书**的一个根
+ 它们不包括在任何`CRL`证书撤销列表中
+ 并且他们在`X.509`证书**结构的`OU`字段中**列出了`MSP`配置的**一个或多个组织单位**

有关当前`MSP`实施中身份有效性的更多信息，将读者引用到[`MSP`身份有效性规则](https://hyperledger-fabric.readthedocs.io/en/latest/msp-identity-validity-rules.html)。

除了与验证相关的参数之外，为了使`MSP`能够对其**实例化的节点进行签名或认证**，需要指定：

+ 用于节点签名的**签名密钥**（目前仅支持`ECDSA`密钥）
+ **节点的`X.509`证书**，即此`MSP`验证参数下的**有效标识**

值得注意的是，`MSP`身份**永不过期**。它们只能通过将它们**添加到适当的`CRL`来撤销**。此外，目前**不支持强制撤销`TLS`证书**。