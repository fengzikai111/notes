# Hyperledger fabric 关键概念



# 介绍

Hyperledger Fabric 是一个分布式账本的区块链方案解决平台，采用模块化、提供高度机密、弹性灵活和可扩展的架构。它旨在支持不同组件模块的可插拔实现，并适应经济生态系统中复杂性。

## 什么是区块链？

区块链有三部分重要组成，它们分别是分布式分类账本、智能合约、共识机制。

### 分布式分类账本

区块链网络的核心是一个分布式的分类账本，记录区块链网络上发生的所有交易信息。

分布式分类账本是分散的，它们被复制到区块链网络中的不同节点上，每个参与者都维护其中的程序进行**协作**。所以分布式分类账本是分散和合作的强大，反映了企业在现实世界中交换商品和服务的方式。

![_images / basic_network.png](https://hyperledger-fabric.readthedocs.io/en/latest/_images/basic_network.png)

除了分散和协作的技术特点外，记录到区块链的信息数据还使用**加密**技术，保证数据一旦上链后将**无法修改**。这种**不可变**的特性让定位数据的**出处**变得简单。因为参与者可以确定数据信息在事后没有改变。这就是为什么区块链有时被描述为**证明系统的原因**。

### 智能合约

为了支持信息的一致更新特性，并启用分类账本的功能（交易、查询），区块链网络使用**智能合约**来提供对分类账本的受控访问。

![_images / Smart_Contract.png](https://hyperledger-fabric.readthedocs.io/en/latest/_images/Smart_Contract.png)

智能合约不仅是封装信息并在整个区块链网络中保持简单的关键机制。还可以编写参与者自动执行某些交易。例如：可以编写智能合约规定运输物品的成本，其中运费根据运输中的速度而变化，根据双方同意并写入分类账的条款。当收到物品时，适当的资金可以转手。

### 共识机制

共识是保持分类账本交易在整个区块链网络中同步的过程。确保分类账本仅仅在交易时被相应的参与者批准并执行更新，在当分类账本更新时，它们要以相同的顺序执行相同的交易数据更新，这系列动作被称为**共识**。

![_images / consensus.png](https://hyperledger-fabric.readthedocs.io/en/latest/_images/consensus.png)

区块链视为共享的复制交易系统就足够了，该系统通过智能合约进行更新，并通过称为共识的协作流程保持一致。

## 为什么区块链有用？

### **今天的记录系统** 

今天的交易网络都是自商业记录以来一直存在微小更新记录的网络版本。业务网络的成员彼此进行交易，他们各自维护自己的交易记录。

![_images / current_network.png](https://hyperledger-fabric.readthedocs.io/en/latest/_images/current_network.png)

现代技术已经从石碑布匹、纸质记录到硬盘或云存储演进，但所有系统底层结构都是相同的。由于所有参与者的身份不一致，要建立一个统一的系统是不可能。所有的合同是手动签署和执行，每个数据库都存储交易的唯一信息。即使可见性和信任的需求很明显，今天的信息和流程共享方法也不可能构建一个跨越业务网络的记录系统

### **区块链差异** 

由于现代的交易系统效率低下，而是在网络上建立身份、执行交易、存储数据。要想让数据一旦写入、无法修改，这时候就需要区块链网络。

![_images / future_net.png](https://hyperledger-fabric.readthedocs.io/en/latest/_images/future_net.png)

这是一个区块链网络，每个参与者都有一个分类账本的副本。除了共享分类账本 信息之外，还共享更新分类账本的过程。与现代系统不同，参与者的私人程序用于更新私人的分类账本，区块链系统具有共享分类账本和更新分类账本的特性。

通过共享分类账本协调业务网络能力，区块链网络可以减少与私人信息和处理的相关时间、成本和风险，同时提高信任和可见性。

### 什么是`Hyperledger Fabric`？

Linux基金会于2015年创建了`Hyperledger`项目，以推进跨行业的区块链技术。它不是宣布单一区块链标准，而是鼓励通过社区流程开发区块链技术的协作方法，其中包括鼓励开放式开发和随着时间的推移采用关键标准的知识产权。

`Hyperledger Fabric`是`Hyperledger`中的区块链项目之一。与其他区块链技术一样，它有一个分类账，使用智能合约，是参与者管理交易的系统。

`Hyperledger Fabric`从其他区块链系统中打破的地方是**私有**和**许可**。`Hyperledger Fabric`网络的成员通过可信赖的**会员服务提供商（MSP）**注册，而不是允许未知身份参与网络的开放式无权限系统（需要诸如“工作证明”之类的协议来验证交易并保护网络）。

`Hyperledger Fabric`还提供多种可插拔选项。分类帐数据可以以多种格式存储，共识机制可以交换进出，并且支持不同的`MSP`。

`Hyperledger Fabric`还提供创建**通道的功能**，允许一组参与者创建单独的交易分类帐。对于网络而言，这是一个特别重要的选择，其中一些参与者可能是竞争对手，并且不希望他们做出的每笔交易 - 例如，他们向某些参与者提供的特殊价格，而不是每个参与者都知道的其他参与者。如果两个参与者组成一个频道，那么这些参与者，而不是其他参与者拥有该频道的分类帐副本。

**共享分类帐** 

`Hyperledger Fabric`有一个分类账本子系统，它包括两个组件：**世界状态**和**交易日志**。每个参与者都拥有他们所属的`Hyperledger Fabric`网络中分类账本的一个副本。

世界状态描述了在给定时间点下的分类账本的状态，它是分类账本的数据库。交易日志组件记录当前分类账本的所有交易，它是世界状态的更新历史。然后，**分类账本是世界状态数据库和交易日志历史记录的组合**。

分类账本具有可以替换的状态数据库。默认情况下，是`LevelDB`键值存储数据库。交易日志不需要是可插入的，它只记录区块链网络中分类账本交易时数据库的前后值。

**智能合约**

`Hyperledger Fabric`智能合约以**链代码**编写，当该应用程序需要与分类帐交互时，由**区块**链外部的应用程序调用。在大多数情况下，`chaincode`只与分类帐的数据库组件，世界状态（例如，查询它）交互，而不与交易日志交互。

`Chaincode`可以用几种编程语言实现。目前，支持`Go`和`Node`、`Java`。

**隐私**

根据企业需求，在区块链网络中参与者对自己共享的信息可能非常的敏感。

`Hyperledger Fabric`支持隐私，可以使用通道方式来保护敏感数据。它是关键操作要求是相对开放的网络。

**共识**

交易必须按照发生的顺序写入分类账本，即使他们位于网络中不同的参与者之间。为此，必须建立交易的顺序，并且采用一种方法来拒绝错误（或恶意）的交易数据插入到分类账本中。

`Hyperledger Fabric`旨在允许网络启动者选择最能代表参与者之间存在的关系的共识机制。与隐私一样，有一系列需求；从在他们的关系中高度结构化的网络到更加点对点的网络。

我们将了解有关`Hyperledger Fabric`共识机制的更多信息，目前包括`SOLO`和`Kafka`。

# `Hyperledger Fabric` 功能

`Hyperledger Fabric` 是分布式账本技术（`DLT`）的一种实现，可在模块化架构区块链架构中提供企业级网络安全性，具有可扩展、机密性、高性能的特点。



## 身份管理

为了启用权限网络，`Hyperledger Fabric` 提供了一个**成员身份服务**功能，用于管理用户ID并对网络上的所有参与者进行**身份验证**。访问控制列表可用于通过授权特定网络操作来提供额外的权限控制层。例如，可以允许特定用户ID调用链代码应用程序，但是不能部署新的链代码。

## 隐私和保密

`Hyperledger Fabric` 使竞争的商业利益以及任何需要私密交易的群体能够在同一个权限网络上共存。专用的**通道**是受限的信息传递的路径，可以用于网络成员的特定子集提供**交易隐私和保密性**。通道上的所有数据（交易、成员、通道）都是**不可见**的，对于没有明确授权给通道的访问权限的任何网络成员都是不可访问的。

## 高效性能

`Hyperledger Fabric` 按节点类型分配**网络角色**，为了向网络提供**并发性和并行性**，**执行交易和交易排序、交易提交**是分开的。在排序交易之前执行交易能够使**每个对等节点同时处理多个交易**。这种并发执行提高了每个对等体的处理效率，并且**加速了向排序服务提供交易交付**速度。

除了并行处理之外，**分工**还可以减轻排序节点对交易执行和分类账本**维护的需求**，同时使对等节点**免于排序**（共识）服务的工作负载。角色的分配也**限制了授权和认证**的所需处理，所有对等节点都不必信任任何排序节点，反之亦然。因此一方上的进程可以独立于另一方的验证运行。

## `Chaincode`功能

`Chaincode` 应用程序编码由通道上特定类型的交易调用的逻辑。

## 模块化设计



